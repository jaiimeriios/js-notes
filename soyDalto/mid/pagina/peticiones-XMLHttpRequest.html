<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="html5 Template" />
    <title>Peticiones HTTP</title>
    <link rel="icon" href="https://raw.githubusercontent.com/jaiimeriios/html5-Main-Template/master/favicon.ico" />
    <link href="../../css/normalize.css" rel="stylesheet" media="all" />
    <link href="../../css/styles.css" rel="stylesheet" media="all" />

    <style>

    </style>
</head>

<body>

    <div class="container">
        <h1>Peticiones XMLHttpRequest</h1>
    </div>

    <div class="container">

    </div>

    <script type="text/javascript">
        objecto = {
            cosa1: 'cosa 1',
            cosa2: 'cosa 2',
        };
        console.log('objecto', objecto);


        // JSON DATA

        const objectoJSON1 = '{"json1":"cosa json 1", "json2":"cosa json 2"}';
        const objectoJSON2 = {
            'json1': 'cosa json 1',
            'json2': 'cosa json 2',
        };

            console.log('JSON 1::',objectoJSON1);
            console.log('JSON 2::', objectoJSON2);
            
            const deserializado = JSON.parse(objectoJSON1);
            console.log('parseado::',deserializado);

            const serializado = JSON.stringify(objectoJSON2);
            console.log('stringify::', serializado);


        // AJAX

        const request = new XMLHttpRequest
        const baseUrl = 'https://reqres.in/api/users'

        request.addEventListener('readystatechange', () => {
            if (request.readyState === 4 && request.status === 200) {
                console.warn(request.status)
                console.log(JSON.parse(request.response))
            }
        })

        request.addEventListener('load', () => {
            console.warn(' %c LOAD::: ', 'font-size:14px; background:#475ac5; text-shadow: 1px 1px 1px rgba(0,0,0,.5)')
            
            const respuesta = JSON.parse(request.response)
            console.log(respuesta)
            console.log(respuesta.support)
        })

        // AGARRAR DEL SERVIDOR
            request.open("GET", `${baseUrl}?page=5`)
            request.send()

        // PARA POSTEAR AL SERVIDOR
            // request.open("POST", `${baseUrl}?page=5`)
            // request.setRequestHeader("Content-type", "application/json;charset=UTF8")
            // request.send(JSON.stringify({
            //     "name": "morpheus",
            //     "job": "leader"
            // }))
            
            
    
    
    </script>
</body>

</html>